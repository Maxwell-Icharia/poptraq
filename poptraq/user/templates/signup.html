{% extends "layout.html" %}

{% import "bootstrap/wtf.html" as wtf %}

{% block title %} Signup {% endblock %}

{% block nav %}
    {% if email %}
        <ul class="nav navbar-nav navbar-right">
          <li><a href="{{ url_for('user.logout')}}"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
        </ul>
    {% endif %}

    {% if exists%}
        <ul class="nav navbar-nav navbar-right">
          <li><a href="{{ url_for('user.login')}}"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
        </ul>
    {% endif %}
<script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}

{% block content %}
    {% if email %}
        <div class="alert alert-info alert-dismissible text-center w-25 p-3">
            Already logged in as: <strong>{{ email }}. </strong>
            <a href="{{ url_for('user.account')}}" class="alert-link" style="color:green;"> Proceed</a>
            or
            <a href="{{ url_for('user.logout')}}" class="alert-link" style="color:red;"> Logout</a>
            <a href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        </div>
    {% endif %}

    {% if exists %}
        <div class="alert alert-warning alert-dismissible text-center">
            <strong>User credentials already exist.</strong>
            <a href="{{ url_for('user.login')}}" class="alert-link" style="color:green;"> Login</a>
            or <strong>Typo</strong>?
            <a href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        </div>
    {% endif %}
<div class="container">
    <br/>
    <h2>Signup</h2>

    <form class="form-horizontal col-sm-8" method="POST" action="{{ url_for('user.signup')}}">
        <dl>
            {{ form.csrf_token }}
            {{ wtf.form_field(form.national_id) }}
            {{ wtf.form_field(form.first_name) }}
            {{ wtf.form_field(form.surname) }}
            {{ wtf.form_field(form.dob) }}
            {{ wtf.form_field(form.email) }}
            {{ wtf.form_field(form.home_county) }}
            {{ wtf.form_field(form.password) }}
            {{ wtf.form_field(form.confirm_password) }}
            <div class="g-recaptcha" data-sitekey="6LfgSHMUAAAAAPCT_9i_stHIR_AxowHyHvF-oD0z"></div>
        </dl>
        <input class="btn btn-success" type="submit" value="Submit"/>
    </form>
</div>
{% endblock %}