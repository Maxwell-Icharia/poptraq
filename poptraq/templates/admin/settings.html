{% extends "admin/layout.html" %}

{% block title %} Admin {% endblock title %}

{% block nav %}
{% if current_user.user and current_user.admin %}
    <ul class="nav navbar-nav navbar-left">
        <li><a href="{{ url_for('user.account')}}"><span class="glyphicon glyphicon-refresh"></span> Switch</a></li>
        <li><a href="{{ url_for('admin.population')}}"><span class="glyphicon glyphicon-new-window"></span> Poptraq</a></li>
    </ul>
{% endif %}
<ul class="nav navbar-nav navbar-right">
    <li><a href="{{ url_for('admin.add_admin')}}"><span class="glyphicon glyphicon-plus"></span> Add Admin</a></li>
    <li><a href="{{ url_for('admin.report_dash')}}"><span class="glyphicon glyphicon-list-alt"></span> Reports</a></li>
    <li><a href="{{ url_for('admin.statistics')}}"><span class="glyphicon glyphicon-stats"></span> Statistics</a></li>
    <li><a href="{{ url_for('admin.notifications')}}"><span class="glyphicon glyphicon-bell"></span> Notifications <span class="badge">{{5}}</span></a></li>
    <li><a href="{{ url_for('admin.settings')}}"><span class="glyphicon glyphicon-wrench"></span> Settings</a></li>
    <p class="navbar-text"><strong>Admin Account: </strong>{{ current_user.email }}</p>
    <li><a href="{{ url_for('admin.logout')}}"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
</ul>
{% endblock %}

{% block content %}

<div class="container">
    <center>
        <h1>Admin - View</h1>
        <h2>Submissions status</h2>
    </center>
</div>
<br>
<div class="container">
    <center>
        <h1>Admin - View</h1>
        <h2>Access Rights</h2>
    </center>
</div>
<br>
{% if results %}
<div id="results">
    <table class="table table-hover table-striped table-responsive">
        <thead>
        <tr>
            <th>National ID</th>
            <th>Email Address</th>
            <th>User Privileges</th>
            <td style="color:green;">Grant User Rights</td>
            <td style="color:red;">Revoke User Rights</td>
            <th>Admin Privileges</th>
            <td style="color:blue;">Grant Admin Rights</td>
            <td style="color:orange;">Revoke Admin Rights</td>
        </tr>
        </thead>

        {% for result in results%}
        <tr>
            <td>{{ result.national_id }}</td>
            <td>{{ result.email }}</td>
            <td>{{ result.user }}</td>
            <td><a href="{{ url_for('admin.grant_user_rights', national_id=result.national_id) }}" type="button"
                   class="btn btn-success">Grant User Rights</a></td>
            <td><a href="{{ url_for('admin.revoke_user_rights', national_id=result.national_id) }}" type="button"
                   class="btn btn-danger">Revoke User Rights</a></td>
            <td>{{ result.admin }}</td>
            <td><a href="{{ url_for('admin.grant_admin_rights', national_id=result.national_id) }}" type="button"
                   class="btn btn-primary">Grant Admin Rights</a></td>
            <td><a href="{{ url_for('admin.revoke_admin_rights', national_id=result.national_id) }}" type="button"
                   class="btn btn-warning">Revoke Admin Rights</a></td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endif %}
{% endblock %}
